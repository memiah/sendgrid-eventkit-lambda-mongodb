sudo: required

services:
  - docker

env:
  ENVIRONMENT: travis
  TESTFILE: ./testdata/events.real.json
  DATABASE: mongodb://mongodb:27017/sendgrid
  - distribution: ubuntu
    version: trusty

before_install:
  - sudo docker --version
  - sudo docker build --no-cache --rm --file=.docker/Dockerfile.travis

script:
  - docker-compose up -d

after_script:
  - docker-compose stop
  - docker-compose rm -f
